<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecionamento Aleatório</title>
    <script>
        async function redirecionarParaLinkAleatorio() {
            const notionAPIKey = "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"; // API Key (substitua por uma nova)
            const pageId = "SEU_PAGE_ID"; // Substitua pelo ID da sua página no Notion

            const notionUrl = `https://api.notion.com/v1/blocks/${pageId}/children`;

            try {
                const response = await fetch(notionUrl, {
                    method: "GET",
                    headers: {
                        "Authorization": `Bearer ${notionAPIKey}`,
                        "Notion-Version": "2022-06-28"
                    }
                });

                if (!response.ok) throw new Error("Erro ao buscar links do Notion");

                const data = await response.json();
                const links = data.results
                    .map(block => block.paragraph?.rich_text[0]?.text?.content)
                    .filter(text => text && text.startsWith("http"));

                if (links.length === 0) throw new Error("Nenhum link disponível");

                const linkAleatorio = links[Math.floor(Math.random() * links.length)];
                window.location.href = linkAleatorio; // Redireciona para o link sorteado

            } catch (error) {
                console.error("Erro:", error);
                document.body.innerHTML = "<h1>Erro ao carregar link</h1>";
            }
        }

        window.onload = redirecionarParaLinkAleatorio;
    </script>
</head>
<body>
    <h1>Redirecionando...</h1>
</body>
</html>